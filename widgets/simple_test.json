{
  "id": "simple_test",
  "name": "Simple Test",
  "version": "1.0",
  "category": "Test",
  "description": "A simple test widget demonstrating basic MIDI processing",
  "entryElements": [
    {
      "id": "test",
      "label": "TEST",
      "controlType": "knob",
      "direction": "input",
      "dataType": "int",
      "description": "Test parameter (CV controllable)",
      "valueConstraints": {
        "type": "range",
        "min": 0,
        "max": 127,
        "default": 64
      }
    },
    {
      "id": "mode",
      "label": "MODE",
      "controlType": "dropdown",
      "direction": "config",
      "dataType": "string",
      "description": "Test mode selection",
      "valueConstraints": {
        "type": "options",
        "options": [
          {"value": "passthrough", "label": "Pass"},
          {"value": "double", "label": "Double"},
          {"value": "half", "label": "Half"}
        ],
        "default": "passthrough"
      }
    },
    {
      "id": "output",
      "label": "output",
      "controlType": "jack",
      "direction": "output",
      "dataType": "int",
      "description": "Test output signal",
      "valueConstraints": {
        "type": "range"
      }
    }
  ],
  "template": [
    "global ${output} = 0;",
    "@{if mode == 'passthrough':",
    "  noteOn(ch, note, vel) -> noteOn(ch, note, vel), ${output} = vel;",
    "  noteOff(ch, note, vel) -> noteOff(ch, note, vel);",
    "elif mode == 'double':",
    "  noteOn(ch, note, vel) -> noteOn(ch, note, vel * 2 > 127 ? 127 : vel * 2), ${output} = vel * 2;",
    "  noteOff(ch, note, vel) -> noteOff(ch, note, vel);",
    "else:",
    "  noteOn(ch, note, vel) -> noteOn(ch, note, vel / 2), ${output} = vel / 2;",
    "  noteOff(ch, note, vel) -> noteOff(ch, note, vel);",
    "}"
  ],
  "generates": {
    "variables": ["${output}"],
    "rules": ["${instanceId}_test_processor"]
  }
}